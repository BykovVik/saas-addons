<?xml version="1.0" encoding="UTF-8"?>
<!-- Copyright 2020 Eugene Molotov <https://it-projects.info/team/em230418>
     License MIT (https://opensource.org/licenses/MIT). -->
<odoo>
    <record id="product_attribute_subscription" model="product.attribute">
        <field name="name">Subscription (SaaS)</field>
        <field name="sequence">30</field>
    </record>

    <record id="product_attribute_value_subscription_anually" model="product.attribute.value">
        <field name="name">Anually</field>
        <field name="attribute_id" ref="product_attribute_subscription"/>
        <field name="sequence">10</field>
    </record>

    <record id="product_attribute_value_subscription_monthly" model="product.attribute.value">
        <field name="name">Monthly</field>
        <field name="attribute_id" ref="product_attribute_subscription"/>
        <field name="sequence">20</field>
    </record>

    <record id="product_users" model="product.template">
        <field name="name">Users</field>
        <field name="sale_ok" eval="True" />
        <field name="purchase_ok" eval="False" />
        <field name="type">service</field>
        <field name="list_price">0</field>
        <field name="taxes_id" eval="[(5,)]" />
    </record>

    <record id="product_users_attribute_subscription_line" model="product.template.attribute.line">
        <field name="product_tmpl_id" ref="product_users" />
        <field name="attribute_id" ref="product_attribute_subscription" />
        <field name="value_ids" eval="[(6, 0, [ref('saas_product.product_attribute_value_subscription_anually'), ref('product_attribute_value_subscription_monthly')])]" />
    </record>

    <function model="ir.model.data" name="_update_xmlids">
        <value model="base" eval="[{
            'xml_id': 'saas_product.product_users_attribute_subscription_value_annually',
            'record': obj().env.ref('saas_product.product_users_attribute_subscription_line').product_template_value_ids[0],
            'noupdate': True,
        }, {
            'xml_id': 'saas_product.product_users_attribute_subscription_value_monthly',
            'record': obj().env.ref('saas_product.product_users_attribute_subscription_line').product_template_value_ids[1],
            'noupdate': True,
            }]"/>
    </function>

    <record id="product_users_attribute_subscription_value_annually" model="product.template.attribute.value">
        <field name="price_extra">120</field>
    </record>

    <record id="product_users_attribute_subscription_value_monthly" model="product.template.attribute.value">
        <field name="price_extra">12.5</field>
    </record>

</odoo>
